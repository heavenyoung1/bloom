# Инструменты для определения координат в PDF

## Способ 1: Координатная сетка (Рекомендуется для начала)

### Создать координатную сетку:
```bash
python scripts/create_coordinate_grid.py
```

Это создаст файл `coordinate_grid.pdf` с сеткой координат.

### Наложить сетку на ваш шаблон:
```bash
python scripts/create_coordinate_grid.py templates/payment/invoice_template.pdf
```

Это создаст `template_with_grid.pdf` - ваш шаблон с наложенной координатной сеткой.

**Как использовать:**
1. Откройте `template_with_grid.pdf`
2. Посмотрите, где находятся нужные поля
3. Запишите координаты из сетки (X и Y)
4. Внесите координаты в конфиг `backend/infrastructure/pdf/config/invoice_fields.json`

## Способ 2: HTML инструмент (Самый удобный)

### Откройте в браузере:
```bash
# Просто откройте файл в браузере
start scripts/coordinate_finder.html
# или
open scripts/coordinate_finder.html  # на Mac/Linux
```

**Как использовать:**
1. Откройте `scripts/coordinate_finder.html` в браузере
2. Загрузите ваш PDF шаблон (или изображение шаблона)
3. Кликайте на места, где нужно вставить данные
4. Вводите имя поля (например: `inn`, `name`, `paid`)
5. Координаты автоматически появятся ниже
6. Нажмите "Копировать JSON" и вставьте в конфиг-файл

**Преимущества:**
- Визуально видно, где кликаете
- Автоматически конвертирует координаты в формат PDF
- Генерирует готовый JSON для конфига
- Можно сохранить несколько полей сразу

## Способ 3: Adobe Acrobat Pro (Точный, но платный)

1. Откройте PDF в Adobe Acrobat Pro
2. Инструменты → Подготовка форм → Редактировать
3. Добавьте текстовое поле там, где нужно вставить данные
4. Правой кнопкой на поле → Свойства → Положение
5. Запишите координаты X, Y, ширина, высота

## Способ 4: Онлайн инструменты

### PDF Escape (бесплатный):
1. Зайдите на https://www.pdfescape.com/
2. Загрузите ваш PDF
3. Добавьте текстовые поля
4. Посмотрите координаты в свойствах полей

### Sejda PDF Editor:
1. Зайдите на https://www.sejda.com/pdf-editor
2. Загрузите PDF
3. Добавьте текстовые поля
4. Посмотрите координаты

## Важные замечания о координатах PDF

### Система координат:
- **Начало (0, 0)**: левый нижний угол страницы
- **Ось X**: растет вправо
- **Ось Y**: растет вверх
- **Размер A4**: 595 x 842 точек (ширина x высота)

### Пример:
Если поле находится:
- На 100 точках от левого края → `x: 100`
- На 700 точках от нижнего края → `y: 700`

### Как проверить координаты:

1. **Используйте тестовый скрипт:**
```python
from backend.infrastructure.pdf import PDFGenerator

# Создайте тестовые данные
class TestPayment:
    id = 1
    name = "ТЕСТ"
    paid = 1000.00
    paid_str = "Одна тысяча рублей"
    pade_date = date(2025, 1, 1)
    paid_deadline = None
    taxable = False
    condition = None

class TestPaymentDetail:
    inn = "1234567890"
    kpp = "0"
    index_address = "123456"
    address = "Тестовый адрес"
    bank_account = "12345678901234567890"
    correspondent_account = "12345678901234567890"
    bik = "123456789"
    bank_recipient = "Тестовый банк"

# Генерируем PDF
generator = PDFGenerator()
pdf_bytes = generator.fill_invoice_template(
    payment=TestPayment(),
    payment_detail=TestPaymentDetail()
)

# Сохраняем для проверки
with open("test_output.pdf", "wb") as f:
    f.write(pdf_bytes)
```

2. **Откройте сгенерированный PDF** и проверьте, попали ли данные в нужные места

3. **Корректируйте координаты** в конфиге, если нужно

## Рекомендуемый порядок действий:

1. ✅ Используйте HTML инструмент (`coordinate_finder.html`) для быстрого определения координат
2. ✅ Скопируйте JSON в конфиг-файл
3. ✅ Протестируйте с тестовыми данными
4. ✅ Скорректируйте координаты, если нужно
5. ✅ Готово!


